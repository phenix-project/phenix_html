<!--REMARK PHENIX TITLE START  Put your title here>


<H4><U>Model building (and more) in the AutoBuild GUI</U></H4>


<!--REMARK PHENIX TITLE END-->

<!--REMARK PHENIX BODY START   Put your text here.
Anything enclosed in header html H4 H5 etc will go in the table of contents>
<p>NOTE:  this document is mainly an introduction for users who are not familiar
with AutoBuild (or the GUI), rather than a comprehensive
reference for the program.  The documentation for the <a class="reference" href="autobuild.htm">command-line version</a> covers the full range of options and functionality.</p>
<p>AutoBuild is the main model-building program in PHENIX; it combines density
modification and chain tracing in RESOLVE with phenix.refine to generate a
high-quality model.  It is optimized to be very thorough by default, and as
a result is one of the most processor-intensive programs in PHENIX.  Most
common protocols can be parallelized over an arbitary number of processors or
cluster nodes, however.  If you need a faster alternative, there are several
simpler building programs in PHENIX:</p>
<blockquote>
<ul>
<li><a class="reference" href="find_helices_strands.htm">phenix.find_helices_strands</a> performs very
fast secondary structure fitting and chain-tracing.  It will generate a
partial protein (or nucleic acid) backbone in a few minutes (depending on
processor speed) but performs no refinement or sequence docking.  This
method tends to work well for low-resolution maps, and AutoBuild has a
similar mode.</li>
<li><a class="reference" href="fit_loops.htm">phenix.fit_loops</a> docks small protein loops missing from
an incomplete model into electron density.  It can perform simple
real-space refinement to clean up the structure.</li>
<li><a class="reference" href="phase_and_build.htm">phenix.phase_and_build</a> is essentially the
model-building component of AutoSol, and like AutoBuild, it performs
iterative density modification, model-building, and refinement.  It is
still substantially faster than AutoBuild, usually at the cost of a few
percent higher R-factors.  Currently only available as a command-line
program.</li>
</ul>
</blockquote>
<p>Several other programs have features similar to functions in AutoBuild; in
particular, <a class="reference" href="refine_gui.htm">phenix.refine</a> includes simple local rebuilding
for sidechain rotamers, and both <tt class="docutils literal"><span class="pre">phenix.refine</span></tt> and <a class="reference" href="create_maps.htm">phenix.maps</a> can generate &quot;kicked&quot; maps, a possible alternative to
composite omit maps (discussed below).  Ligand placement is done separately in
the <a class="reference" href="ligandfit_gui.htm">LigandFit wizard</a>.</p>
<P><H5><U><B>Configuration</B></U></H5><P>
<p>Like several other programs in PHENIX, the AutoBuild GUI can accept a variety
of files in bulk; it is also designed to be started directly from other
programs (e.g. the AutoSol and AutoMR wizards) with files pre-loaded.  At a
minimum, it requires experimental amplitudes and a source of phases (PHI/FOM
columns in the MTZ file, or a partial model), and works best when supplied with
the sequence(s) to be built.  If Hendrickson-Lattman coefficients or R-free
flags are present in the reflections file(s), these will be used as well.
Additional files for starting map coefficients and high-resolution data are
optional.  (An example of the latter would be building into an isomorphous
native dataset after solving a SeMet SAD/MAD structure in AutoSol.)</p>
<div class="image"><img alt="images/autobuild_config.png" src="images/autobuild_config.png" /></div>
<p>AutoBuild is limited to building one chain type at a time, and performs no
ligand fitting (the <a class="reference" href="ligandfit_gui.htm">LigandFit wizard</a> should be used for
this).  However, additional chains may be included as a &quot;ligand file&quot;, which
contains any existing parts of the model that you want AutoBuild to leave
untouched (it will still be used in refinement).  For non-standard ligands,
you will need to include CIF files.  Custom settings for <a class="reference" href="refine_gui.htm">phenix.refine</a> (i.e. the &quot;.eff file&quot;) may also be supplied.</p>
<p>If you are running AutoBuild directly from experimental phasing, the PDB file
containing heavy atoms should be included.  For selenomethionine-derivatized
proteins, the heavy atom sites will be used to anchor the methionines in the
sequence.  AutoBuild can also be directed to build actual SeMet residues in
place of Met.</p>
<p>AutoBuild has two different modes for using an PDB file supplied as a starting
model, set by the &quot;Rebuild in place&quot; control.  By default, the model will be
rebuilt as necessary and refined without adding or removing atoms (&quot;Auto&quot; or
&quot;True&quot;).  If False, the model will be used as a source of phasing information
but a new model will be built into the density-modified map.  You can still
incorporate parts of the initial model by checking the &quot;Include input model&quot;
box.  Currently, if you want to extend an existing model without removing any
of the input atoms, we recommend using <a class="reference" href="fit_loops.htm">phenix.fit_loops</a>
instead.</p>
<P><H5><U><B>Multiprocessing and queueing systems</B></U></H5><P>
<p>To build as thorough a model as possible, AutoBuild will spawn many similar
processes, each of which will produce a slightly different result (depending
on build options and random number generation).  This can be disabled by
checking the &quot;Quick mode&quot; box, but the parallel builds typically result in
more residues placed and a few percent lower R-free.  As many processors as
are available may be utilized, although for building only three or four
processes will be run at a time.  The GUI will automatically set the maximum
number of processors to one less than are present in the system (or just
one for older, single-core machines).</p>
<p>This type of parallelism is very well suited for execution across a cluster,
and AutoBuild supports spawning of processes using a queuing system such
as Sun Grid Engine (SGE).  To enable this method, open the Preferences,
switch to the &quot;Processes&quot; section, and click the box labeled &quot;Activate
queuing system support&quot;, then re-launch the AutoBuild GUI.  Another control
will now appear labeled &quot;Use queuing system to distribute tasks&quot;.  If this is
checked, all child processes will be submitted to the queue instead of being
run locally.  Note that this is independent of the option to run the entire
AutoBuild process on the cluster, which only appears when the &quot;Run&quot; button is
clicked.  Both options may be combined, but only if the cluster setup allows
submitting jobs from the individual nodes.</p>
<p>For composite omit map generation (described below), the parallelism is even
more effective, since each omitted box can be processed separately.</p>
<P><H5><U><B>Output</B></U></H5><P>
<p>As soon as AutoBuild starts running, a new tab will appear for the current
job.  This will be divided into sub-tabs, starting with job status and console
output.  A second sub-tab will display a list of output files and additional
results as they appear; these will include the <a class="reference" href="xtriage_gui.htm">Xtriage</a>
report on the experimental data, which can be loaded into the GUI by clicking
the &quot;Results and graphs&quot; button.  Once maps and a model are available,
clicking the Coot or PyMOL buttons will load these into the desired viewer.</p>
<div class="image"><img alt="images/autobuild_final.png" src="images/autobuild_final.png" /></div>
<p>The map file will be named <tt class="docutils literal"><span class="pre">overall_best_denmod_map_coeffs.mtz</span></tt>, which
contains only an F(obs) map.  Users who want difference maps like those
produced by phenix.refine should run the separate <a class="reference" href="create_maps.htm">phenix.maps GUI</a>.
AutoBuild will output two PDB files, one containing all built residues
(<tt class="docutils literal"><span class="pre">overall_best.pdb</span></tt>), and one with only those residues for which the known
sequence could be docked (<tt class="docutils literal"><span class="pre">overall_best_placed.pdb</span></tt>).  The final tab,
&quot;Structure status&quot;, will display a schematic of the sequence and secondary
structure for each chain.</p>
<div class="image"><img alt="images/autobuild_seq_ss.png" src="images/autobuild_seq_ss.png" /></div>
<p>While the wizard is running in parallel build mode, the &quot;Model-building&quot; tab
will show the progress of the individual jobs.  Although the output of these
should not be used since a higher-quality final consensus model will be
assembled by AutoBuild, you can view the current model for any job by
selecting from the list and clicking the Coot button.</p>
<div class="image"><img alt="images/autobuild_multi.png" src="images/autobuild_multi.png" /></div>
<P><H5><U><B>Omit maps</B></U></H5><P>
<p>For clarity, the omit map functionality has been moved to a separate GUI,
with similar behavior but different configuration options.</p>
<div class="image"><img alt="images/autobuild_omit.png" src="images/autobuild_omit.png" /></div>
<p>Omit maps may be generated for either a specific (usually small) region of
the structure, such as a ligand or problematic loop, or a composite of the
entire structure.  In the latter mode, the program will iterate over boxes
covering the unit cell, calculate maps for each box with the atoms inside
left out, and assemble a complete map at the end.  (Note that an omit map
for a specific region could also be generated manually by deleting part of
a model or setting the occupancies to zero, then running phenix.refine.)</p>
<p>Because of the interdependency of all reflections and all atoms, re-calculating
maps immediately after deleting atoms does not reliably remove phase bias.
The &quot;Omit map type&quot; control offers three choices for handling the partial
models; the simplest of these will run <tt class="docutils literal"><span class="pre">phenix.refine</span></tt> with simple
minimization and ADP refinement alone.  A much more thorough method of removing
bias is a simulated annealing omit map, which allows the structure to escape
local minima.  (Currently this only supports the Cartesian dynamics; torsion
angle SA will be available in a future version.)  A third, even more robust
option is the iterative build omit map, which rebuilds the partial structure.
In addition to thoroughly removing bias, the resulting models provide an
estimate of uncertainty for atomic coordinates.</p>
<p>The main disadvantage of these methods is the long running time especially for
the iterative build omit maps.  However, because AutoBuild is highly parallel,
we recommend always using the simulated annealing or iterative build options.
If you only want to generate figures for publication, specifying a region of
the structure to leave out will be more efficient than running the full
composite omit map calculation.</p>
<P><H5><U><B>Standalone density modification</B></U></H5><P>
<p>A third variant of the AutoBuild GUI is dedicated to generating density
modified maps with no additional building.  This version of the GUI is
single-processor only, but runs in much less time than the more advanced
versions.  Users who wish to create a prime-and-switch map after molecular
replacement should use this interface.  Note that if an input model is
supplied, the default behavior is still to run refinement first, which
considerably increases runtime.  (This can be disabled by checking the
&quot;Refine model&quot; box.)</p>
<div class="image"><img alt="images/autobuild_dm.png" src="images/autobuild_dm.png" /></div>
<P><H5><U><B>References</B></U></H5><P>
<blockquote>
<ul>
<li>CITATION:autobuild</li>
<li>CITATION:autobuild_omit</li>
<li>CITATION:prime_and_switch</li>
<li>CITATION:phenix.refine</li>
</ul>
</blockquote>
<!--REMARK PHENIX BODY END-->
